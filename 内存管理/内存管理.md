# 操作系统之内存管理

为什么需要内存管理？

不管存储器有多大，程序大小的增长速度比内存容量的增长速度要快的多

## 分层存储器体系

<img src="..\images\image-20240218182105000.png" alt="image-20240218182105000" style="zoom:50%;" />

对这些分层的管理，抽象出了内存管理器

## 无存储器抽象

最简单的存储器抽象是无存储器

最早的大型机，小型机，个人计算机都是直接操控内存

这种情况下的计算机不可能会有两个应用程序同时在内存中

为了解决这种共享问题，出现了三种变体

<img src="..\images\image-20240218182512943.png" alt="image-20240218182512943" style="zoom:50%;" />

第一种目前已经不怎么用了，第二种普遍应用于嵌入式，手机，掌上电脑，第三种应用于个人计算机

## 实现并行性

在没有存储器抽象的系统中实现并行性的一种方式是使用多线程来编程

​	人们通常希望能够在同一时间内运行没有关联的程序，而这正是线程抽象所不能提供的

把当前内存中所有内容保存到磁盘文件中，然后再把程序读入内存即可



防止用户程序和操作系统相互干扰：4位保护键

## 物理内存暴露的缺点

如果用户程序可以寻址内存的每个字节，它们就可以很容易的破坏操作系统

想要运行多个程序是很困难的

如果使多个应用程序同时运行在内存中，必须解决两个问题，保护和重定位

<img src="..\images\image-20240222101231071.png" alt="image-20240222101231071" style="zoom:50%;" />

​													第二个程序本应跳转到28位置，结果28位置执行的是第一个程序的ADD操作

解决方法：

​	静态重定位：存储位置 = 实际物理地址+跳转物理地址

​		缺点：需要多一步计算，速度慢，而且有些地址不能存储，有些地址可以存储，还要进行区分

为了弥补这些缺点，抽象出了**装载器**



